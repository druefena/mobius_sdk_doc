List of exceptions
=====================

The SDK is designed to throw exception for certain error types to inform the user.
This section is an inventory of all possible exceptions and recommended actions.

Basic functions
----------------


.. list-table:: Exceptions in the context of system set-up
   :widths: 25 25 50
   :header-rows: 1

   * - Exception name
     - | Possible causes
     - | Recommended solution
   * - InvalidModelException
     - | Whenever model is not loaded and tried to use predict function.
     - | Please check if the SDK is properly loaded.
       | You can use isOperational() to return a bool value if itâ€™s properly loaded.
   * - FailedLoadingModelException
     - | Multiple possible reasons for example IO problem with file system
     - | Check path is valid to pre-trained or custom trained model.
       | File could be missing or corrupted file structure.
       | File should be properly generated by the SDK function saveCustomModel.
   * - SmallImageException
     - | Exception will be thrown when you feed an image
       | that is smaller than the minimum size of 64 pixels on the smaller side.
     - | We recommend not to use images with a minimum size of 224 pixels on the smaller side.
       | Upscaling the image will also not result in good predictions.
   * - InvalidInputImage
     - | Issue with image loading and pre-processing.
     - | Please check that the image is passed as a valid bitmap.
   * - InvalidSearchKeyword
     - | Search can be fed as a list of keywords,
       | then it has to be strictly according to the list of available concepts.
       | Can be caused by one single keyword from list.
     - | Please check that when using lists that all keywords are supported.
       | You can check the list with getListOfKeywords().
       | If you write a keyword or a sentence (a string) separated with spaces
       | then this error is not thrown.
   * - InvalidThresholdValue
     - | When you try to get thresholded results when the threshold value
       | that is out of the specified range that is returned in the message.
     - | Please check that the value is in the specified range.
   * - InvalidTopkValue
     - | Only happens for predicting with keywords.
       | The topK value should be more than 1 and we have also a maximum limit of 30.
     - | Try setting a topK value to an integer between 1 and 30.



Custom model training
----------------------


.. list-table:: Exceptions when using the custom model module
   :widths: 25 25 50
   :header-rows: 1


   * - Exception name
     - | Possible causes
     - | Recommended solution
   * - NotEnoughTrainingImages
     - | For custom training, you need to feed
       | at least one positive and one negative image for training.
     - | Please check that you are passing enough positive and negative feature vectors.
   * - FailedSavingModelException
     - | IO problem saving a custom model file.
     - | No permission to save the file to a certain location
       | or path is not valid.
       | Please verify your settings for file system access.
   * - InconsistentFeatureSize
     - | Feature size for keywording and aesthetics model
       | is not as expected as for combined features.
     - | Please closely follow the training instructions and don't edit feature vectors.
   * - NoModelException
     - | Can be thrown if you try to save or predict
       | with a model that does not exist.
       | Every custom model is identified by a key that was set before training.
     - | Please verify the name of the model.
       | You can use the function getAvailableCustomModels() to
       | get all names of trained models returned.


Third party exceptions
------------------------

It is possible to encounter exceptions raised by third party libraries that we use within the SDK.
In particular, you might see exceptions thrown from Tensorflow. These are commonly related to problems
with multithreading as Tensorflow only allows processing consecutively.

Please contact us if you have issues with such exceptions.

Other common problems
----------------------
If the SDK can't load, it is often because of OpenCL.
For the Snapdragon SDK, please make sure that your device uses a Snapdragon chip and that it can access libOpenCL.so .
Usually this .so should be included in the public lib list : /system/etc/public.libraries.txt.

If you get the following error when building:

::

  Error:error: the input file ... libsnpe_dsp_skel.so' has no sections


Try to add the following in your gradle file:

::

  buildTypes {
  ...
      packagingOptions {
          doNotStrip "**/*/*.so"
      }
  }

If you're using Proguard or DexGuard, please add this rule in your rules config file:

::

  -keep class com.qualcomm.**{*;}
  -keep class ml.mobius.**{*;}
